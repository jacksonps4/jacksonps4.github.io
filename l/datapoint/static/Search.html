<h2>Observation search</h2>

<input type="text" id="location" data-ng-model="location" />
<button id="search" data-ng-click="searchObservations()">Search</button>

<table class="table table-striped table-condensed">
	<tbody>
		<tr data-ng-repeat="location in locations">
			<td data-ng-click="selectLocation(this.location.id)">{{location.name}}</td>
		</tr>
	</tbody>
</table>

<div data-ng-show="observations">

<h3>{{observations[0].location.name}}</h3>

<div>
    <canvas id="pressureChart" width="500" height="200"></canvas>
    <canvas id="temperatureChart" width="500" height="200"></canvas>
    <canvas id="windChart" width="500" height="200"></canvas>
    <canvas id="humidityChart" width="500" height="200"></canvas>
</div>

<a href="#/current?locationId={{observations[0].location.id}}">Current conditions at {{observations[0].location.name}}</a>
<table class="table table-striped table-condensed">
    <thead>
    <tr>
        <th>Time</th>
        <th>Location</th>
        <th>Temperature</th>
        <th>Visibility</th>
        <th>Visibility description</th>
        <th>Wind direction</th>
        <th>Wind speed</th>
        <th>Wind Gust</th>
        <th>Weather type</th>
        <th>Pressure mB</th>
        <th>Pressure inHg</th>
        <th>Pressure tendency</th>
        <th>Dewpoint</th>
        <th>Humidity</th>
    </tr>
    </thead>
    <tbody>
    <tr data-ng-repeat="ob in observations | orderBy : 'time' : true">
        <td>{{ob.time | date : 'yyyy-MM-dd HHmm'}}</td>
        <td>{{ob.location.name}}</td>
        <td>{{ob.temperature}}</td>
        <td>{{ob.visibility}}</td>
        <td>{{ob.visibilityDescription}}</td>
        <td>{{ob.windDirection}}</td>
        <td>{{ob.windSpeed}}</td>
        <td>{{ob.windGust}}</td>
        <td>{{ob.weatherTypeDescription}}</td>
        <td>{{ob.pressure}}</td>
        <td>{{ob.pressureInHg | number : 2}}</td>
        <td>{{ob.pressureTendency}}</td>
        <td>{{ob.dewPoint}}</td>
        <td>{{ob.screenRelativeHumidity}}</td>
    </tr>
    </tbody>
</table>

<iframe id="locationMap" width="350" height="350" style="border:0"></iframe>

</div>